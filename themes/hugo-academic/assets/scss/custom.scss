

// Override this file to add your own SCSS styling.

// Prevent white flash on dark theme load
html {
  // Immediate dark theme application (used by theme-init.js)
  &.dark-theme-loading {
    background-color: #0f172a !important;
    color: #e2e8f0 !important;
    
    body {
      background-color: #0f172a !important;
      color: #e2e8f0 !important;
    }
  }
}

// Smooth transition for theme switching
body {
  transition: background-color 0.3s ease, color 0.3s ease;
}

// General blockquote styling 
blockquote {
  padding: 0.7%;
  padding-left: 1.7%;
  margin-bottom: 1.5rem !important;
}

// Publication abstract spacing
.pub-abstract {
  margin-bottom: 1.5rem !important;
}

// Ensure immediate dark theme application only when dark class is present
body.dark {
  background-color: #0f172a;
  color: #e2e8f0;
}

// CSS Custom Properties for Light/Dark Theme Support
:root {
  // Light theme colors (default)
  --text-primary: #00032F;
  --text-secondary: darkgrey;
  --text-tertiary: #4F6C89;
  --text-quaternary: #24494F;
  --text-visited: purple;
  --text-hover: black;
  --text-active: #24494F;
  
  // Navigation colors
  --nav-text: darkgrey;
  --nav-hover: #00ff00; // Green for hover underline
  --nav-active: #5f9ea0; // Dark aquamarine for active
  --nav-link: #79A990;
  --nav-hover-text: #006400; // Dark green for hover text (light theme)
  
  // Background colors
  --bg-highlight: #EAFFE8;
  --bg-button: #F8F8F8;
  --bg-button-secondary: #F7F7F7;
  --bg-button-hover: #E6FFE3;
  --bg-tag: #F3F3F3;
  --bg-tag-visited: #F7F1FF;
  --bg-tag-hover: #E6FFE3;
  --bg-profile-gradient: #E6FFE3;
  --bg-warning: #F6F7E4;
  --bg-script-container: white;
  --bg-full-text: white;
  --bg-full-text-hover: #f0fdf4;
  --bg-cv: #fff7ec;
  --bg-cv-hover: #f0e6d2;
  
  // Border colors
  --border-color: lightgrey;
  --border-warning: #6B6F0F;
  --border-full-text: #4CAF50;
  --border-full-text-hover: #388e3c;
  --border-cv: #196F27;
  --border-cv-hover: #145a20;
  
  // Accent colors
  --accent-primary: #379E8A;
  --accent-secondary: #57a292;
  --accent-tertiary: #8AA3CD;
  --accent-quaternary: #96666f;
  --accent-visited-categories: #9E84B0;
  
  // Special backgrounds and gradients
  --gradient-light: linear-gradient(180deg, #ffffe2, #ffffeb, #fffff5, #fffff5, #fffff5, #fffff5, #BAF1B7);
  --gradient-section-border: linear-gradient(to right, #BADDD5, #BADDD5, #EAF7F3, #F2FBF8);
  --gradient-script: linear-gradient(135deg, #d7e3e0);
  --gradient-script-hover: linear-gradient(135deg, #d3f3e9, #a9e3c9);
  
  // Animation colors
  --anim-start: aquamarine;
  --anim-mid: #088F8F;
  --anim-end-1: #8FABA6;
  --anim-end-2: #8AA3CD;
  --anim-end-3: #96666f;
  
  // Utility colors
  --color-red: red;
  --color-white: white;
  --color-black: black;
  --text-warning: #4A4D10;
  --related-references: #787878;
  --scrollbar-thumb: #57a292;
  --scrollbar-track: #edf5f4;
}

// Dark theme color overrides
// =================================================================================
// Color Conversion System: Light → Dark Theme Mappings
// 
// Light Theme Color → Dark Theme Equivalent:
// #006400 (dark green) → #32cd32 (lime green) - Better visibility on dark backgrounds
// #5f9ea0 (dark aquamarine) → #5f9ea0 (same) - Already works well on dark
// #00ff00 (bright green) → #00ff00 (same) - High contrast works on both themes
// darkgrey → #94a3b8 (slate blue-grey) - Softer on dark backgrounds
// #79A990 (muted teal) → #67e8f9 (cyan) - Brighter for dark theme visibility
//
// Conversion Principles:
// 1. Dark colors → Lighter equivalents for dark backgrounds
// 2. Maintain color family relationships (green stays green)
// 3. Ensure adequate contrast ratios for accessibility
// 4. Preserve semantic meaning across themes
// =================================================================================

body.dark {
  --text-primary: #e2e8f0;
  --text-secondary: #94a3b8;
  --text-tertiary: #a0b3cc;
  --text-quaternary: #cbd5e1;
  --text-visited: #d8b4fe;
  --text-hover: #f1f5f9;
  --text-active: #cbd5e1;
  
  // Navigation colors for dark theme (converted for dark background visibility)
  --nav-text: #94a3b8;
  --nav-hover: #A5D9C5; // Custom mint green for hover underline in dark mode
  --nav-active: #7db3ad; // Lighter aquamarine for active text in dark theme
  --nav-link: #67e8f9; // Cyan (brighter conversion of light theme teal)
  --nav-hover-text: #A5D9C5; // Custom mint green for hover text in dark mode
  
  // Background colors for dark theme (converted for dark mode)
  --bg-highlight: rgba(72, 187, 120, 0.2); // Green highlight with low opacity for dark
  --bg-button: #374151;
  --bg-button-secondary: #4b5563;
  --bg-button-hover: rgba(72, 187, 120, 0.3); // Green hover background (converted from light theme)
  --bg-tag: #374151;
  --bg-tag-visited: #4c1d95;
  --bg-tag-hover: rgba(72, 187, 120, 0.25); // Subtle green hover (converted)
  --bg-profile-gradient: rgba(72, 187, 120, 0.2); // Green gradient for dark theme
  --bg-warning: #422006;
  --bg-script-container: #1f2937;
  --bg-full-text: #374151;
  --bg-full-text-hover: rgba(72, 187, 120, 0.15); // Subtle green hover (converted from light)
  --bg-cv: #422006;
  --bg-cv-hover: #451a03;
  
  // Border colors for dark theme (converted equivalents)
  --border-color: #4b5563;
  --border-warning: #a16207;
  --border-full-text: aquamarine; // High contrast accent
  --border-full-text-hover: #16a34a; // Darker green → brighter green conversion
  --border-cv: aquamarine; // High contrast accent  
  --border-cv-hover: #16a34a; // Darker green → brighter green conversion
  
  // Accent colors for dark theme
  --accent-primary: #22d3ee;
  --accent-secondary: #06b6d4;
  --accent-tertiary: #60a5fa;
  --accent-quaternary: #e998c2;
  --accent-visited-categories: #c084fc;
  
  // Special backgrounds and gradients for dark theme
  --gradient-light: linear-gradient(180deg, rgba(72, 187, 120, 0.12), rgba(72, 187, 120, 0.08), rgba(72, 187, 120, 0.05));
  --gradient-section-border: linear-gradient(to right, #374151, #4b5563, #6b7280);
  --gradient-script: linear-gradient(135deg, #374151);
  --gradient-script-hover: linear-gradient(135deg, rgba(72, 187, 120, 0.25), rgba(72, 187, 120, 0.15));
  
  // Animation colors for dark theme
  --anim-start: aquamarine;
  
  // Utility colors for dark theme
  --color-red: #ef4444;
  --color-white: #1f2937;
  --color-black: #f8fafc;
  --text-warning: #fbbf24;
  --related-references: #94a3b8;
  --scrollbar-thumb: #06b6d4;
  --scrollbar-track: #374151;
}

// General dark theme color overrides for custom colors and classes
body.dark {
  // Override common custom colors used in content
  * {
    // Override specific hex colors commonly used for TEXT
    &[style*="#665F5F"], &[style*="#665f5f"] {
      color: #94a3b8 !important;
    }
    &[style*="#333"], &[style*="#333333"] {
      color: #cbd5e1 !important;
    }
    &[style*="#666"], &[style*="#666666"] {
      color: #94a3b8 !important;
    }
    &[style*="#000"], &[style*="#000000"] {
      color: #f1f5f9 !important;
    }
    &[style*="color: black"] {
      color: #f1f5f9 !important;
    }
    &[style*="color: grey"], &[style*="color: gray"] {
      color: #94a3b8 !important;
    }
    &[style*="color: darkgrey"], &[style*="color: darkgray"] {
      color: #64748b !important;
    }
    
    // Override BACKGROUND colors for nesting elements
    &[style*="background-color: white"], &[style*="background-color: #ffffff"], &[style*="background-color: #fff"], &[style*="background: white"], &[style*="background: #ffffff"], &[style*="background: #fff"] {
      background-color: #1f2937 !important;
    }
    &[style*="background-color: #f"], &[style*="background: #f"] {
      background-color: #374151 !important;
    }
    &[style*="background-color: #e"], &[style*="background: #e"] {
      background-color: #4b5563 !important;
    }
    &[style*="background-color: #d"], &[style*="background: #d"] {
      background-color: #6b7280 !important;
    }
    &[style*="background-color: lightgray"], &[style*="background-color: lightgrey"], &[style*="background: lightgray"], &[style*="background: lightgrey"] {
      background-color: #4b5563 !important;
    }
    &[style*="background-color: gray"], &[style*="background-color: grey"], &[style*="background: gray"], &[style*="background: grey"] {
      background-color: #6b7280 !important;
    }
    
    // Override common light background colors
    &[style*="background-color: #F8F8F8"], &[style*="background: #F8F8F8"] {
      background-color: #374151 !important;
    }
    &[style*="background-color: #F0F0F0"], &[style*="background: #F0F0F0"] {
      background-color: #4b5563 !important;
    }
    &[style*="background-color: #EEEEEE"], &[style*="background: #EEEEEE"] {
      background-color: #4b5563 !important;
    }
    &[style*="background-color: #E0E0E0"], &[style*="background: #E0E0E0"] {
      background-color: #6b7280 !important;
    }
    
    // Override border colors for nesting elements
    &[style*="border-color: #"], &[style*="border: 1px solid #"] {
      border-color: #6b7280 !important;
    }
    &[style*="border-color: lightgray"], &[style*="border-color: lightgrey"] {
      border-color: #6b7280 !important;
    }
  }
  
  // Specific class overrides
  .course {
    color: #cbd5e1 !important;
  }
  
  .institution {
    color: #94a3b8 !important;
  }
  
  // Override any remaining dark colors
  [class*="text-dark"], .text-dark {
    color: #f1f5f9 !important;
  }
  
  [class*="text-black"], .text-black {
    color: #f1f5f9 !important;
  }
  
  [class*="text-grey"], .text-grey, [class*="text-gray"], .text-gray {
    color: #94a3b8 !important;
  }
  
  // Override background classes for nesting elements
  [class*="bg-white"], .bg-white {
    background-color: #1f2937 !important;
  }
  
  [class*="bg-light"], .bg-light {
    background-color: #374151 !important;
  }
  
  [class*="bg-gray"], .bg-gray, [class*="bg-grey"], .bg-grey {
    background-color: #4b5563 !important;
  }
  
  // Common Bootstrap and utility classes
  .card {
    background-color: #374151 !important;
    border-color: #6b7280 !important;
  }
  
  .table {
    background-color: #1f2937 !important;
    color: #e2e8f0 !important;
  }
  
  .table td, .table th {
    border-color: #6b7280 !important;
  }
  
  // Override any remaining problematic backgrounds
  div[style*="background"], span[style*="background"], p[style*="background"] {
    // Only override if it contains light colors
    &[style*="#f"], &[style*="#e"], &[style*="#d"], &[style*="white"] {
      background-color: #374151 !important;
    }
  }
  
  // Smart link color adaptation based on parent background
  // For dark backgrounds (now converted), use light links
  [style*="background-color: #1"], [style*="background-color: #2"], [style*="background-color: #3"], [style*="background-color: #4"],
  [style*="background: #1"], [style*="background: #2"], [style*="background: #3"], [style*="background: #4"],
  .bg-dark a, .bg-primary a, .bg-secondary a, .alert-dark a, [class*="bg-dark"] a,
  .card a, .table a {
    color: #bfdbfe !important;
    
    &:hover {
      color: #dbeafe !important;
      background-color: rgba(59, 130, 246, 0.2) !important;
    }
    
    &:visited {
      color: #c7d2fe !important;
    }
  }
  
  // For elements that still have light backgrounds (edge cases), use darker links  
  [style*="background-color: #f"], 
  [style*="background-color: #e"],
  [style*="background: #f"],
  [style*="background: #e"] {
    // Only apply if the background wasn't already converted
    &:not([style*="background-color: #374151"]):not([style*="background-color: #4b5563"]) {
      a {
        color: #1e40af !important;
        
        &:hover {
          color: #1d4ed8 !important;
          background-color: rgba(59, 130, 246, 0.1) !important;
        }
        
        &:visited {
          color: #6366f1 !important;
        }
      }
    }
  }
  
  // For colored alert boxes and special containers
  .alert a,
  .card a,
  .badge a,
  [class*="bg-"] a:not([class*="bg-transparent"]) {
    // High contrast links for any colored background
    color: #bfdbfe !important;
    text-decoration: underline;
    
    &:hover {
      color: #dbeafe !important;
      opacity: 0.9;
      text-decoration: none;
    }
    
    &:visited {
      color: #c7d2fe !important;
    }
  }
  
  // Additional conversions for common problematic elements
  // Code blocks and pre elements
  code, pre {
    background-color: #1e293b !important;
    color: #e2e8f0 !important;
    border-color: #6b7280 !important;
  }
  
  // Blockquotes and quotes
  blockquote {
    background-color: #374151 !important;
    border-left-color: #6b7280 !important;
    color: #e2e8f0 !important;
  }
  
  // Form elements
  input, textarea, select {
    background-color: #374151 !important;
    color: #e2e8f0 !important;
    border-color: #6b7280 !important;
  }
  
  // Bootstrap Alert components
  .alert {
    background-color: #374151 !important;
    color: #e2e8f0 !important;
    border-color: #6b7280 !important;
  }
  
  .alert-success {
    background-color: #065f46 !important;
    color: #d1fae5 !important;
    border-color: #10b981 !important;
  }
  
  .alert-info {
    background-color: #1e3a8a !important;
    color: #dbeafe !important;
    border-color: #3b82f6 !important;
  }
  
  .alert-warning {
    background-color: #92400e !important;
    color: #fef3c7 !important;
    border-color: #f59e0b !important;
  }
  
  .alert-danger {
    background-color: #991b1b !important;
    color: #fecaca !important;
    border-color: #ef4444 !important;
  }
  
  .alert-light {
    background-color: #374151 !important;
    color: #e2e8f0 !important;
    border-color: #6b7280 !important;
  }
  
  .alert-dark {
    background-color: #1f2937 !important;
    color: #f3f4f6 !important;
    border-color: #4b5563 !important;
  }
  
  // Alert links should be properly styled
  .alert a, .alert .alert-link {
    color: inherit !important;
    text-decoration: underline !important;
    font-weight: bold !important;
    
    &:hover {
      opacity: 0.8 !important;
      text-decoration: none !important;
    }
  }
  
  // Any remaining light-colored divs or spans with text
  div, span, p {
    // Override if they have inline styles with light backgrounds
    &[style*="background-color: #F"] {
      background-color: #374151 !important;
    }
    &[style*="background-color: #E"] {
      background-color: #4b5563 !important;
    }
    &[style*="background-color: #D"] {
      background-color: #6b7280 !important;
    }
  }
  
  // Enhanced link visibility for dark theme with green underlines
  // Only apply to content areas, exclude navigation, buttons, and UI elements
  .article-container p a:link, 
  .article-container ul a:link, 
  .article-container li a:link, 
  .article-container div a:link:not(.btn):not(.badge), 
  .article-container td a:link, 
  .article-style a:link,
  .pub-abstract a:link,
  .hanging-indent a:link,
  .related-references a:link,
  main p a:link,
  main ul a:link,
  main li a:link,
  main div a:link:not(.btn):not(.badge),
  section p a:link,
  section ul a:link, 
  section li a:link,
  section div a:link:not(.btn):not(.badge),
  a.dsq-brlink {
    text-decoration: underline;
    text-decoration-color: #bbf7d0;
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
  }

  .article-container h3 a:visited, 
  .article-container div a:visited:not(.btn):not(.badge), 
  .article-container p a:visited, 
  .article-container ul a:visited, 
  .article-container li a:visited, 
  .article-container td a:visited, 
  .article-style a:visited,
  .pub-abstract a:visited,
  .hanging-indent a:visited,
  .related-references a:visited,
  main p a:visited,
  main ul a:visited,
  main li a:visited,
  main div a:visited:not(.btn):not(.badge),
  section p a:visited,
  section ul a:visited, 
  section li a:visited,
  section div a:visited:not(.btn):not(.badge),
  a.dsq-brlink:visited, 
  a:visited > code {
    text-decoration: underline;
    text-decoration-color: #bbf7d0;
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
  }

  .article-container p a:hover, 
  .article-container ul a:hover, 
  .article-container li a:hover, 
  .article-container div a:hover:not(.btn):not(.badge), 
  .article-container td a:hover, 
  .article-style a:hover,
  .pub-abstract a:hover,
  .hanging-indent a:hover,
  .related-references a:hover,
  main p a:hover,
  main ul a:hover,
  main li a:hover,
  main div a:hover:not(.btn):not(.badge),
  section p a:hover,
  section ul a:hover, 
  section li a:hover,
  section div a:hover:not(.btn):not(.badge),
  a.dsq-brlink:hover, 
  .article-container h3 > a:hover, 
  a:hover > code {
    text-decoration: underline;
    text-decoration-color: #22c55e;
    text-decoration-thickness: 2px;
    text-underline-offset: 2px;
  }

  // Content area headings - remove green underlines since they're now excluded above
  // (These were previously styled but are now explicitly excluded)

  // Category links removed from green underlining - now handled by exclusion rules above

  // Tag cloud links - no green underlines, just normal hover behavior
  .tag-cloud > a:hover {
    text-decoration: none;
    color: var(--text-quaternary);
  }

  // Explicitly remove green underlines from navigation, buttons, and UI elements
  .navbar a, 
  .nav a, 
  .btn, 
  .badge,
  .btn-links a,
  .navbar-nav a,
  #navbar-main a,
  #navbar-content a,
  .section-heading a,
  .portrait-title a,
  .social-icon a,
  .btn-outline-primary,
  button,
  .js-dark-toggle a,
  h2 a,
  h3 a,
  h4 a,
  .cv-btn,
  .cv-btn a,
  .article-categories a,
  .tag-cloud a {
    text-decoration: none !important;
    text-decoration-color: transparent !important;
  }

  // Remove green underlines from button hover states too
  .navbar a:hover, 
  .nav a:hover, 
  .btn:hover, 
  .badge:hover,
  .btn-links a:hover,
  .navbar-nav a:hover:not(.js-dark-toggle),
  #navbar-main a:hover:not(.js-dark-toggle),
  #navbar-content a:hover,
  .section-heading a:hover,
  .portrait-title a:hover,
  .social-icon a:hover,
  .btn-outline-primary:hover,
  button:hover:not(.read-more-btn),
  .js-dark-toggle a:hover,
  h2 a:hover,
  h3 a:hover,
  h4 a:hover,
  .cv-btn:hover,
  .cv-btn a:hover,
  .article-categories a:hover,
  .tag-cloud a:hover {
    text-decoration: none !important;
    text-decoration-color: transparent !important;
  }

  // Add white background behind images in dark theme for better text visibility
  img {
    background-color: white;
    padding: 2px;
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }

  // Exceptions for images that should not have white backgrounds
  .navbar img,
  .social-icon img,
  .portrait img,
  .navbar-brand img,
  .imageContainer img,
  .imageModal-content,
  [class*="logo"] img,
  [class*="icon"] img,
  .avatar img {
    background-color: transparent !important;
    padding: 0 !important;
    border-radius: 0 !important;
    box-shadow: none !important;
  }
  
  // Keep avatar-circle round - override the border-radius: 0 rule above
  .avatar.avatar-circle img,
  .avatar-circle img {
    border-radius: 50% !important;
  }
}


// On scroll and only in desktop view, highlight section headings, tags in articles, bio info (name, title, email, socials), and the tag cloud at the bottom of the site. This work depends on CSS code in custom.scss, and JS code in academic.js.

@media (min-width: 1000px) {
  
  div.col-12.col-lg-4.section-heading, div.col-12.col-lg-4.section-heading > h1, div.article-container.pt-3 > div.btn-links.mb-3 > a:link, div.btn-links.mb-3 > button, button > h3, .portrait-title > h3, .social-icon, .tag-cloud a:link, #top > div.pub > div > a > button {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.03s ease-in-out;
  }
  

  div.col-12.col-lg-4.section-heading.visible, div.col-12.col-lg-4.section-heading > h1.visible {
    opacity: 1;
    transform: translateY(0);
    animation: color-transition1 2s forwards;
  }
  
  @keyframes color-transition1 {
    0% {
      color: var(--anim-start);
    }
    33% {
      color: var(--anim-mid);
    }
    66% {
      color: var(--anim-end-1);
    }
    100% {
      color: var(--text-secondary);
    }
  }
  
  
  div.article-container.pt-3 > div.btn-links.mb-3 > a:link.visible, button.visible, button > h3.visible, div.btn-links.mb-3 > button.visible, #top > div.pub > div > a > button.visible {
    opacity: 1;
    transform: translateY(0);
    animation: color-transition2 1.5s forwards;
  }
  
  @keyframes color-transition2 {
    0% {
      color: var(--anim-start);
    }
    33% {
      color: var(--anim-mid);
    }
    66% {
      color: var(--anim-end-1);
    }
    100% {
      color: var(--text-hover);
    }
  }
  
  
  .portrait-title > h3.visible, .social-icon.visible {
    opacity: 1;
    transform: translateY(0);
    animation: color-transition3 1.5s forwards;
  }
  
  @keyframes color-transition3 {
    0% {
      color: var(--anim-start);
    }
    33% {
      color: var(--anim-mid);
    }
    66% {
      color: var(--anim-end-1);
    }
    100% {
      color: var(--accent-tertiary);
    }
  }
  
  
  .tag-cloud > a:link.visible {
    opacity: 1;
    transform: translateY(0);
    animation: color-transition4 5s forwards;
  }
  
  @keyframes color-transition4 {
    0% {
      color: var(--anim-start);
    }
    33% {
      color: var(--anim-mid);
    }
    66% {
      color: var(--anim-end-1);
    }
    100% {
      color: var(--accent-quaternary);
    }
  }

}

// Mobile scroll animations - optimized for fast, responsive mobile performance
@media (max-width: 999px) {
  
  // Section headings: NO ANIMATION on mobile - instant visibility
  div.col-12.col-lg-4.section-heading, 
  div.col-12.col-lg-4.section-heading > h1 {
    opacity: 1 !important; // Always visible
    transform: none !important; // No transform effects
    transition: none !important; // No transitions
    animation: none !important; // No animations
  }
  
  // Other elements: keep minimal animations for subtle effect
  div.article-container.pt-3 > div.btn-links.mb-3 > a:link, 
  div.btn-links.mb-3 > button, 
  button > h3, 
  .portrait-title > h3, 
  .social-icon,
  #top > div.pub > div > a > button {
    opacity: 0;
    transform: translateY(10px); // Reduced movement for snappy mobile animation
    transition: all 0.15s ease-out; // Much faster transition for immediate response
  }
  
  // Mobile button links animation - quick and snappy
  div.article-container.pt-3 > div.btn-links.mb-3 > a:link.visible, 
  button.visible, 
  button > h3.visible, 
  div.btn-links.mb-3 > button.visible, 
  #top > div.pub > div > a > button.visible {
    opacity: 1;
    transform: translateY(0);
    animation: mobile-color-transition2 0.4s forwards; // Very fast for immediate button visibility
  }
  
  @keyframes mobile-color-transition2 {
    0% {
      color: var(--anim-start);
    }
    50% {
      color: var(--anim-mid);
    }
    100% {
      color: var(--text-hover);
    }
  }
  
  // Mobile bio/profile elements animation - instant response
  .portrait-title > h3.visible, 
  .social-icon.visible {
    opacity: 1;
    transform: translateY(0);
    animation: mobile-color-transition3 0.4s forwards; // Fast profile element animation
  }
  
  @keyframes mobile-color-transition3 {
    0% {
      color: var(--anim-start);
    }
    50% {
      color: var(--anim-mid);
    }
    100% {
      color: var(--accent-tertiary);
    }
  }

}


// Profile subsections

#profile > div:nth-child(5) > div > ul > div> div > a:link, #profile > div:nth-child(5) > div > ul > div> div > a {
  margin-right: -10px;
}

#profile > div:nth-child(5) > div > ul > div> div > a:link, #profile > div:nth-child(5) > div > ul > div> div > a:visited {
  color: var(--text-secondary);
  background-color: transparent;
  display: block;
  padding-left: 0.5em;
  padding-right: 0.5em;
  background: linear-gradient(var(--bg-profile-gradient) 0 0) var(--p, 0) / var(--p, 0) no-repeat;
  transition: 0.4s, background-position 0s;
}

#profile > div:nth-child(5) > div > ul > div> div > a:hover {
  color: var(--text-hover);
}

.profile-subsection:hover {
  --p: 100%;
}

// Interests
#profile > div:nth-child(4) > div {
  color: var(--text-secondary);
}

// unvisited link
p a:link, ul a:link, li a:link, .article-container a:link, td a:link, a.dsq-brlink, div.grid-sizer > div > a {
  color: var(--text-primary);
}

// visited link
h3 a:visited, div a:visited, p a:visited, ul a:visited, li a:visited, .article-container a:visited, td a:visited, a.dsq-brlink:visited, div.grid-sizer > div > a:visited, a:visited > code {
  color: var(--text-visited); 
  background-color: transparent;
}

// mouse over link
p a:hover, ul a:hover, li a:hover, .article-container a:hover, td a:hover, a.dsq-brlink:hover, div.grid-sizer > div > a:hover, #top > div.pub > div > div > div.col-md-10 > div > div.col-12.col-md-9 > a:hover, h3 > a:hover, #top a:hover, a:hover > code {
  background-image: none; // necessary to override `p a:link` property
  color: var(--text-hover);
  background-color: var(--bg-highlight);
  text-decoration: none;
}

// Exception: no background highlight for links inside full-text-btn
.full-text-btn a:hover,
.full-text-btn h3 > a:hover,
.full-text-btn:hover a,
.full-text-btn:hover h3 > a {
  background-color: transparent !important;
  background-image: none !important;
  background: none !important;
}

// active link
h3 a:active, div a:active, p a:active, ul a:active, li a:active, .article-container a:active, td a:active, a.dsq-brlink:active {
  color: var(--text-active); 
}

// background colour for links
p a:link, td a:link, div.grid-sizer > div > a, #top > div.pub > div > div > div.col-md-10 > div > div.col-12.col-md-9 > a, h3 > a, h4 > a, h5 > a, a > code {
  background-image: var(--gradient-light);
}

/* Remove link highlight from general links in home 
and from bio portrait information. */

// Navigation bar

// Light theme navbar background
.navbar {
  background-color: var(--color-white) !important;
  border-bottom: 1px solid var(--border-color);
}

// Dark theme navbar background
body.dark .navbar {
  background-color: #1f2937 !important;
  border-bottom: 1px solid #4b5563;
}

// Dark theme navbar brand and text
body.dark .navbar-brand,
body.dark .navbar-nav .nav-link,
body.dark #navbar-main,
body.dark #navbar-content,
body.dark .navbar-collapse {
  color: var(--nav-text) !important;
}

// Navbar brand hover styling for both light and dark themes
.navbar-brand:hover {
  color: #5f9ea0 !important; // Dark aquamarine
  transition: color 0.3s ease;
}

body.dark .navbar-brand:hover {
  color: #5f9ea0 !important; // Dark aquamarine
}

// Ensure navbar elements have proper dark background
body.dark #navbar-main,
body.dark .navbar-toggler {
  background-color: #1f2937 !important;
}

// Make navbar toggler more visible in dark theme
body.dark .navbar-toggler {
  color: #94a3b8 !important;
}

// Additional specific rule for navbar-collapse to ensure dark theme styling
body.dark .navbar-collapse,
body.dark .navbar-collapse *,
body.dark .navbar-collapse .nav-link,
body.dark .navbar-collapse .navbar-nav .nav-link {
  color: var(--nav-text) !important;
  background-color: #1f2937 !important;
}

// Dark theme navbar toggler icon
body.dark .navbar-toggler-icon {
  filter: invert(1);
}

#navbar-main > div > div.d-none.d-lg-inline-flex > a, #navbar-content > ul > li > a, #navbar-main > div > div.navbar-brand-mobile-wrapper.d-inline-flex.d-lg-none > a {
  color: var(--nav-text);
}

#navbar-main > div > div.d-none.d-lg-inline-flex > a:hover, #navbar-content > ul > li > a:hover, #navbar-main > div > div.navbar-brand-mobile-wrapper.d-inline-flex.d-lg-none > a:hover {
  color: var(--nav-hover);
}

div.col-12.col-lg-4.section-heading > h1, #navbar-content > ul > li > a {
  color: var(--text-secondary);
}

.nav-link.active span {
  color: var(--nav-active);
}

#navbar-main a:link {
  color: var(--nav-link);
  background-color: transparent;
}

#navbar-content > ul > li > a:hover > span {
  color: var(--nav-hover);
  font-weight: normal !important; // Remove bold on hover
}

// Navigation Menu Styling Enhancements
// =================================================================================

// 0. Remove ALL existing underlines and borders from navigation elements
.navbar-nav .nav-link,
.navbar-nav .nav-link.active,
.navbar-nav .nav-link:hover,
.navbar-nav .nav-link.active span,
.navbar-nav .nav-link:hover span,
#navbar-content > ul > li > a,
#navbar-content > ul > li > a.active,
#navbar-content > ul > li > a:hover,
#navbar-content > ul > li > a.active > span,
#navbar-content > ul > li > a:hover > span,
#navbar-main .nav-link,
#navbar-main .nav-link.active,
#navbar-main .nav-link:hover,
.nav-link,
.nav-link.active,
.nav-link:hover {
  text-decoration: none !important;
  border-bottom: none !important;
  border-top: none !important;
  border-left: none !important;
  border-right: none !important;
  box-shadow: none !important;
  outline: none !important;
  position: relative; // Needed for ::after positioning
}

// 1. Remove bold font-weight from all navigation menu items
.navbar-nav .nav-link,
.navbar-nav .nav-link.active,
.navbar-nav .nav-link:hover,
.navbar-nav .nav-link.active span,
.navbar-nav .nav-link:hover span,
#navbar-content > ul > li > a,
#navbar-content > ul > li > a.active,
#navbar-content > ul > li > a:hover,
#navbar-content > ul > li > a.active > span,
#navbar-content > ul > li > a:hover > span,
#navbar-main .nav-link,
#navbar-main .nav-link.active,
#navbar-main .nav-link:hover {
  font-weight: normal !important;
}

// 2. Active menu item styling - dark aquamarine color with properly centered underline
.navbar-nav .nav-link.active,
#navbar-content > ul > li > a.active,
.nav-link.active {
  color: var(--nav-active) !important; // Dark aquamarine
  font-weight: normal !important;
  text-decoration: none !important;
}

// Fixed positioning for active underlines - centered under text
.navbar-nav .nav-link.active::after,
#navbar-content > ul > li > a.active::after,
.nav-link.active::after {
  content: '';
  position: absolute;
  bottom: -3px; // Positioned closer to words but not too close
  left: 50%; // Center the underline
  transform: translateX(-50%); // Center alignment
  width: 80%; // Slightly narrower than full width for better centering
  height: 1px;
  background-color: var(--nav-active);
  display: block;
}

// 3. Hover menu item styling - dark green color with properly centered underline
.navbar-nav .nav-link:hover:not(.active),
#navbar-content > ul > li > a:hover:not(.active),
.nav-link:hover:not(.active) {
  color: var(--nav-hover-text) !important; // Dark green for hover text
  font-weight: normal !important;
  text-decoration: none !important;
  transition: color 0.1s ease; // Fast transition to reduce lag
}

// Fixed positioning for hover underlines - centered under text
.navbar-nav .nav-link:hover:not(.active):not(.js-dark-toggle):not(.js-search)::after,
#navbar-content > ul > li > a:hover:not(.active)::after,
.nav-link:hover:not(.active):not(.js-dark-toggle):not(.js-search)::after {
  content: '';
  position: absolute;
  bottom: -3px; // Positioned closer to words but not too close
  left: 50%; // Center the underline
  transform: translateX(-50%); // Center alignment
  width: 80%; // Slightly narrower than full width for better centering
  height: 2px; // Slightly thicker for hover
  background-color: var(--nav-hover); // Green for hover underline
  display: block;
  transition: all 0.1s ease; // Fast transition to reduce lag
}

// 4. Ensure span elements inside links also get the right colors
.navbar-nav .nav-link.active span,
#navbar-content > ul > li > a.active > span,
.nav-link.active span {
  color: var(--nav-active) !important; // Dark aquamarine
}

.navbar-nav .nav-link:hover:not(.active) span,
#navbar-content > ul > li > a:hover:not(.active) > span,
.nav-link:hover:not(.active) span {
  color: var(--nav-hover-text) !important; // Dark green for hover text
  transition: color 0.1s ease; // Fast transition to reduce lag
}

// 5. Dark theme consistency with fast transitions
body.dark .navbar-nav .nav-link.active,
body.dark #navbar-content > ul > li > a.active,
body.dark .nav-link.active,
body.dark .navbar-nav .nav-link.active span,
body.dark #navbar-content > ul > li > a.active > span,
body.dark .nav-link.active span {
  color: var(--nav-active) !important;
  text-decoration: none !important;
}

body.dark .navbar-nav .nav-link:hover:not(.active),
body.dark #navbar-content > ul > li > a:hover:not(.active),
body.dark .nav-link:hover:not(.active),
body.dark .navbar-nav .nav-link:hover:not(.active) span,
body.dark #navbar-content > ul > li > a:hover:not(.active) > span,
body.dark .nav-link:hover:not(.active) span {
  color: var(--nav-hover-text) !important; // Dark green for hover text
  text-decoration: none !important;
  transition: color 0.1s ease; // Fast transition to reduce lag
}

#navbar-main > div > ul a:link {
  color: var(--text-secondary);
}

#top > div.pub > div.article-container.pt-3 > div.article-metadata > span.article-categories > a, #profile > div > div > ul > div > a:link, #top > article > div.article-container.pt-3 > div.article-metadata > span.article-categories > a:link, code {
  background-color: transparent;
}

.article-title > a, #profile > div.portrait-title > h3 > a {
  background-image: none; 
}

// unvisited link
h3 a:link {
  color: var(--text-tertiary);
}

// active link

h3 a:hover, div a:hover {
  color: var(--text-quaternary); 
}

// category links
.article-categories a:link {
  color: var(--text-secondary);
}

// visited category and tag cloud links
.article-categories a:visited, .tag-cloud > a:visited {
  color: var(--accent-visited-categories) !important;
}

// hovered category links
.article-categories a:hover {
  color: var(--text-quaternary) !important;
}

// hovered tag cloud links
.tag-cloud > a:hover {
  color: var(--text-quaternary) !important;
  text-decoration: none;
}

// Mobile-specific tag cloud styling with color transitions
@media (max-width: 999px) {
  // Mobile tag cloud elements setup for scroll animations (all states)
  .tag-cloud > a:link,
  .tag-cloud > a:visited {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.03s ease-in-out;
    text-decoration: none !important;
    // Override any general color rules for mobile - start transparent
    color: transparent;
  }
  
  // When visible (triggered by scroll), animate with color transition for unvisited links
  .tag-cloud > a:link.visible {
    opacity: 1;
    transform: translateY(0);
    animation: mobile-tag-color-transition 5s forwards;
    text-decoration: none !important;
  }
  
  // When visible (triggered by scroll), animate with color transition for visited links
  .tag-cloud > a:visited.visible {
    opacity: 1;
    transform: translateY(0);
    animation: mobile-tag-color-transition-visited 5s forwards;
    text-decoration: none !important;
  }
  
  // Mobile-specific color transition animation for unvisited links (matches desktop color-transition4)
  @keyframes mobile-tag-color-transition {
    0% {
      color: var(--anim-start);
    }
    33% {
      color: var(--anim-mid);
    }
    66% {
      color: var(--anim-end-1);
    }
    100% {
      color: var(--accent-quaternary);
    }
  }
  
  // Mobile-specific color transition animation for visited links
  @keyframes mobile-tag-color-transition-visited {
    0% {
      color: var(--anim-start);
    }
    33% {
      color: var(--anim-mid);
    }
    66% {
      color: var(--anim-end-1);
    }
    100% {
      color: var(--accent-visited-categories);
    }
  }
  
  // Hover effects for mobile tag cloud (all states) - override general hover rules
  .tag-cloud > a:link:hover,
  .tag-cloud > a:visited:hover {
    color: var(--text-quaternary) !important;
    transform: scale(1.1);
    transition: all 0.3s ease;
    text-decoration: none !important;
  }
  
  // Explicitly remove any underlines from mobile tag cloud in all themes
  .tag-cloud > a:link,
  .tag-cloud > a:visited,
  .tag-cloud > a:link.visible,
  .tag-cloud > a:visited.visible,
  .tag-cloud > a:link:hover,
  .tag-cloud > a:visited:hover {
    text-decoration: none !important;
    text-decoration-color: transparent !important;
  }
  
  // Additional dark theme specificity to override any green underline rules
  body.dark .tag-cloud > a:link,
  body.dark .tag-cloud > a:visited,
  body.dark .tag-cloud > a:link.visible,
  body.dark .tag-cloud > a:visited.visible,
  body.dark .tag-cloud > a:link:hover,
  body.dark .tag-cloud > a:visited:hover {
    text-decoration: none !important;
    text-decoration-color: transparent !important;
  }
}

// Hide tags in general home page, along with the preceding divider
:is(#publication, #applications-and-dashboards, #blog) span.article-categories, :is(#publication, #applications-and-dashboards, #blog) span.middot-divider:has(+ span.article-categories) {
  display: none;
}

// Reduce margin above button links in home page
:is(#publication, #applications-and-dashboards, #blog) .btn-links {
  margin-top: -2%;
}

// Collapsible abstracts on home page - collapsed by default, expandable on click
// Applied to publication, applications-and-dashboards, and blog sections
:is(#publication, #applications-and-dashboards, #blog) > div > div > div.col-12.col-lg-8 > div > div.media-body > div.article-style {
  max-height: 3.6em; // Show ~3 lines initially
  overflow: hidden;
  position: relative;
  transition: max-height 0.3s ease;
  cursor: pointer; // Make entire area clickable
  margin-bottom: 0rem; // Reduced margin under collapsed abstract
  
  // Add prominent fade gradient at bottom to indicate more content
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2em; // Taller fade area for better visibility
    background: linear-gradient(to bottom, transparent 0%, rgba(255, 255, 255, 0.7) 40%, rgba(255, 255, 255, 0.95) 70%, rgba(255, 255, 255, 1) 100%);
    pointer-events: none;
  }
  
  // Add "Expand" button at bottom center - overlays the text
  // Reduced padding with compact styling
  // Hidden by default, shown on hover
  &::before {
    content: 'Expand';
    position: absolute;
    bottom: 6px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.8em;
    padding: 0px 8px;
    background-color: #555;
    color: #fff;
    border: 1px solid #444;
    border-radius: 3px;
    z-index: 1;
    white-space: nowrap;
    opacity: 0;
    transition: all 0.2s ease;
    pointer-events: none;
  }
  
  // Arrow indicators on sides of Expand button
  // Hidden by default, shown on hover
  .expand-arrow {
    position: absolute;
    bottom: 4px;
    font-size: 0.7em;
    color: #888;
    z-index: 1;
    pointer-events: none;
    opacity: 0;
    transition: all 0.2s ease;
    line-height: 1;
  }
  
  .expand-arrow-left {
    right: calc(50% + 50px);
  }
  
  .expand-arrow-right {
    left: calc(50% + 50px);
  }
  
  // Hover effect for the entire abstract - show button and arrows
  &:hover::before {
    opacity: 1;
    background-color: #444;
    color: #fff;
    transform: translateX(-50%) scale(1.03);
  }
  
  &:hover .expand-arrow {
    opacity: 1;
    color: #555;
  }
}

// Dark theme: invert Expand button colours
body.dark :is(#publication, #applications-and-dashboards, #blog) > div > div > div.col-12.col-lg-8 > div > div.media-body > div.article-style::before {
  background-color: #ddd;
  color: #333;
  border: 1px solid #ccc;
}

body.dark :is(#publication, #applications-and-dashboards, #blog) > div > div > div.col-12.col-lg-8 > div > div.media-body > div.article-style:hover::before {
  background-color: #ccc;
  color: #222;
}

// Dark theme: arrow colors (white for visibility)
body.dark :is(#publication, #applications-and-dashboards, #blog) > div > div > div.col-12.col-lg-8 > div > div.media-body > div.article-style .expand-arrow {
  color: #fff;
}

body.dark :is(#publication, #applications-and-dashboards, #blog) > div > div > div.col-12.col-lg-8 > div > div.media-body > div.article-style:hover .expand-arrow {
  color: #eee;
}

// Specific gradient for applications-and-dashboards section (even section with different background)
#applications-and-dashboards > div > div > div.col-12.col-lg-8 > div > div.media-body > div.article-style::after {
  background: linear-gradient(to bottom, transparent 0%, rgba(247, 250, 252, 0.7) 40%, rgba(247, 250, 252, 0.95) 70%, rgba(247, 250, 252, 1) 100%);
}

// Remove fade gradient and button when expanded
:is(#publication, #applications-and-dashboards, #blog) > div > div > div.col-12.col-lg-8 > div > div.media-body.is-expanded > div.article-style::after,
:is(#publication, #applications-and-dashboards, #blog) > div > div > div.col-12.col-lg-8 > div > div.media-body.is-expanded > div.article-style::before {
  display: none;
}

// Hide arrows when expanded
:is(#publication, #applications-and-dashboards, #blog) > div > div > div.col-12.col-lg-8 > div > div.media-body.is-expanded > div.article-style .expand-arrow {
  display: none;
}

// Dark theme fade gradient - more visible with stronger opacity gradient
body.dark :is(#publication, #applications-and-dashboards, #blog) > div > div > div.col-12.col-lg-8 > div > div.media-body > div.article-style::after {
  background: linear-gradient(to bottom, transparent 0%, rgba(31, 41, 55, 0.7) 40%, rgba(31, 41, 55, 0.95) 70%, rgba(31, 41, 55, 1) 100%);
}

// When expanded, show full content and remove padding
:is(#publication, #applications-and-dashboards, #blog) > div > div > div.col-12.col-lg-8 > div > div.media-body.is-expanded > div.article-style {
  max-height: 100%;
  padding-bottom: 0;
}

// "View complete content" button that appears after abstract expansion
// Light theme (default): dark button with light text
a.view-complete-content-btn,
.view-complete-content-btn {
  display: inline-block !important;
  margin-top: 10px !important;
  margin-bottom: 0.3rem !important;
  padding: 8px 16px !important;
  font-size: 14px !important;
  color: #eee !important;
  background: #555 !important;
  background-color: #555 !important;
  border: 1px solid #444 !important;
  border-radius: 4px !important;
  text-decoration: none !important;
  transition: all 0.3s ease !important;
  
  i {
    margin-right: 5px;
  }
  
  &:hover {
    color: #fff !important;
    background: #444 !important;
    background-color: #444 !important;
    transform: translateY(-2px);
  }
}

// Dark theme: invert View complete content button colours (light button with dark text)
body.dark a.view-complete-content-btn,
body.dark .view-complete-content-btn,
.dark a.view-complete-content-btn,
.dark .view-complete-content-btn {
  color: #333 !important;
  background: #ddd !important;
  background-color: #ddd !important;
  border: 1px solid #ccc !important;
  
  &:hover {
    color: #222 !important;
    background: #ccc !important;
    background-color: #ccc !important;
  }
}

// Document Viewer Styles
.document-viewer-container {
  position: relative;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: box-shadow 0.3s ease;
  margin: 20px auto;
  padding: 0;
  border: 1px solid var(--border-color);
  border-radius: 5px;
  overflow: hidden;
  
  // Responsive width for different screen sizes
  @media (max-width: 768px) {
    // Mobile: 90% width
    width: 90%;
    max-width: 90%;
    margin: 15px auto;
  }
  
  @media (min-width: 769px) {
    // Desktop: 100% width
    width: 100%;
    max-width: 100%;
    margin: 20px auto;
  }
  
  &:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  
  iframe {
    display: block;
  }
}

// Enhanced toolbar for document viewer
.document-viewer-toolbar {
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 10;
  background-color: var(--bg-button);
  border: 1px solid var(--border-color);
  border-radius: 25px;
  padding: 5px 10px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  transition: all 0.2s ease;
  
  &:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }
}

.toolbar-buttons {
  display: flex;
  gap: 5px;
  align-items: center;
}

.doc-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background-color: transparent;
  color: var(--text-hover) !important;
  border: none;
  border-radius: 50%;
  text-decoration: none !important;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 1em;
  
  i {
    font-size: 1em;
  }
  
  &:hover {
    background-color: var(--bg-button-hover) !important;
    transform: scale(1.15);
  }
  
  &:active {
    transform: scale(1.05);
  }
  
  &:focus {
    outline: 2px solid var(--accent-primary);
    outline-offset: 2px;
  }
}

// Separator between button groups
.doc-btn:nth-child(2)::after {
  content: '';
  position: absolute;
  right: -8px;
  top: 50%;
  transform: translateY(-50%);
  width: 1px;
  height: 20px;
  background-color: var(--border-color);
}

// Dark theme adjustments for document viewer
body.dark .document-viewer-container {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
  
  &:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
  }
}

body.dark .document-viewer-toolbar {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
  
  &:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.7);
  }
}

// Change size of article metadata

.article-metadata > div {
  margin-top: -0.1rem;
}

// Reduce margin under article-metadata in web applications and blog sections
#applications-and-dashboards .article-metadata > div,
#blog .article-metadata > div {
  margin-bottom: -0.1rem;
}

#publication > div > div > div.col-12.col-lg-8 > div > div.media-body > div.stream-meta.article-metadata > div {
  font-size: 115%;
}

// Equate font size of first span to match publication name span
#publication .article-metadata > div > span:first-child span {
  font-size: 100%;
}

#top > div.pub > div.article-container.pt-3 > div.article-metadata {
  font-size: 90%;
}

// Reduce font size in mobile view
@media (max-width: 768px) {
  #publication .article-metadata span {
    font-size: 85%;
  }
  
  .article-metadata {
    line-height: 1.3;
  }
}

#top div.media-body > div.article-style {
  font-size: 90%;
}

// Change size of article categories
#top > div.pub > div.article-container.pt-3 > div.article-metadata > span.article-categories {
  font-size: 80%;
}


// Remove 's' tag from tag cloud
a[href$="/tags/s/"] {
  display: none;
}


// Increase padding under h3 headings
h3 {
  padding-bottom: 0.3%;
}

// Reduce margin between paragraphs
p {
  margin-bottom: 2%;
}

// Reduce padding between list items
ul > li {
  margin-bottom: -0.5%;
}


// STICKY TABLE HEADERS - DISABLED

// Sticky table headers disabled due to layout conflicts
// Uncomment and adjust if needed in the future
/*
table th, table thead th {
  position: sticky;
  top: 0;
  z-index: 10;
  background-color: var(--color-white);
  border-bottom: 2px solid var(--border-color);
}

body.dark table th, body.dark table thead th {
  background-color: #1f2937;
  border-bottom-color: #6b7280;
}

@media (min-width: 1000px) {
  table th, table thead th {
    top: 70px;
  }
}
*/


// LINKS

#publication > div > div > div.col-12.col-lg-8 > div > div.media-body > div.btn-links > a, div.article-container.pt-3 > div.btn-links.mb-3 > a:link, #publication > div > div > div.col-12.col-lg-8 > * > div.media-body > div.btn-links > a:link, .btn-links a:link, #top > div.pub > div > a > button:link, #publication > div > div > div.col-12.col-lg-8 > * > div.media-body > div.btn-links > button:link, div.grid-sizer > div > p > button, div.grid-sizer > div > p > a:link, #top > div.pub > div.article-container.pt-3 > div.btn-links.mb-3 > button, #publication > div > div > div.col-12.col-lg-8 > div > div.media-body > div.btn-links > button {
  background-image: none;
  color: var(--text-hover); 
  background-color: var(--bg-button) !important;
  border-color: var(--border-color);
}

div.article-container.pt-3 > div.btn-links.mb-3 > a:visited, #publication > div > div > div.col-12.col-lg-8 > * > div.media-body > div.btn-links > a:visited, .btn-links a:visited, #top > div.pub > div > a > button:visited, #publication > div > div > div.col-12.col-lg-8 > * > div.media-body > div.btn-links > button:visited, #top > div.pub > div.article-container.pt-3 > div.btn-links.mb-3 > button:visited, div.grid-sizer > div > p > button:visited, div.grid-sizer > div > p > a:visited, #publication > div > div > div.col-12.col-lg-8 > div > div.media-body > div.btn-links > button:visited {
  background-image: none;
  color: var(--text-visited);
  font-weight: bold;
  background-color: var(--bg-button-secondary);
  border-color: var(--text-visited);
}

#publication > div > div > div.col-12.col-lg-8 > div > div.media-body > div.btn-links > a:hover, div.article-container.pt-3 > div.btn-links.mb-3 > a:hover, #top > div.pub > div.article-container.pt-3 > div.btn-links.mb-3 > a:hover, #publication > div > div > div.col-12.col-lg-8 > * > div.media-body > div.btn-links > a:hover, .btn-links a:hover, div.grid-sizer > div > p > button:hover, div.grid-sizer > div > p > a:hover, div.media-body > h3 > a:hover, #publication > div > div > div.col-12.col-lg-8 > div > div.media-body > div.btn-links > button:hover, #top > div.pub > div.article-container.pt-3 > div.btn-links.mb-3 > button:hover {
  background-image: none;
  color: var(--text-hover); 
  background-color: var(--bg-button-hover) !important;
  border-color: var(--border-color);
}

// unvisited tag and category links
#top > div.pub > div > div.article-tags > a:link, #top > article > div > div.article-tags > a:link, .article-tags a:link {
  color: var(--text-hover);
  background-color: var(--bg-tag);
}

// visited tag and category links
#top > div.pub > div > div.article-tags > a:visited, #top > article > div > div.article-tags > a:visited, .article-tags a:visited {
  color: var(--text-hover);
  background-color: var(--bg-tag-visited);
}

// hovered tag and category links
#top > div.pub > div > div.article-tags > a:hover, #top > article > div > div.article-tags > a:hover, .article-tags a:hover {
  color: var(--text-hover);
  background-color: var(--bg-tag-hover);
}


// Social icons on the left-hand side of the bio section
#profile > div > div > span > span > a > i:hover {
  color: var(--accent-primary) !important;
  background-color: transparent;
  background-image: none;
}

// Icons on the body of the bio section
#bio > div > div > div.col-12.col-lg-8 > div > div > ul > li > i {
  color: var(--border-color);
  background-color: transparent;
  background-image: none;
}

// Folder icon for categories
span.article-categories > i {
  color: var(--border-color);
  background-color: transparent;
  background-image: none;
}

// Icons

i, #fn1 > p > a.footnote-back {
  background-color: transparent;
  background-image: none;
}

div.col-12.col-lg-4.section-heading > h1 > span > a > i {
  color: var(--border-color);
  background-image: none;
}

a > i:hover, #profile > div > div > span > span > a:hover, #navbar-main > div > button > span > i:hover, :is(#navbar-main, #publication, #applications-and-dashboards, #blog) :is(a:has(i), i:hover, button:hover), #navbar-main > div > button:hover, #navbar-main > div > button > span:hover {
  color: var(--accent-primary);
  background-color: transparent !important;
  background-image: none !important;
}

// Buttons, full text buttons, dashboard/application button
button:hover:not(.read-more-btn), #top > div.pub > div > a > button:hover, #top > div.pub > div > div.article-style > a > button:hover, #top > article > div > div.article-style > a > button:hover {
  background-color: var(--bg-button-hover) !important;
}

// Keyboard buttons
kbd {
  outline: 0;
  vertical-align: baseline;
  background: transparent;
  border-style: solid;
  border-width: 1px 3px 4px;
  -moz-border-radius: 3px;
  -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px #fff inset;
  -webkit-border-radius: 3px;
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px #fff inset;
  background-color: #f7f7f7;
  border: 1px solid #ccc;
  border-radius: 3px;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px #fff inset;
  color: #333;
  display: inline-block;
  font-family: monospace, sans-serif;
  font-size: 95%;
  line-height: 1.2;
  margin: 0 0.1em;
  padding: 0.09em 0.4em 0.11em 0.4em;
  text-shadow: 0 1px 0 #fff;
}


// Bootstrap warning alert messages
div.alert.alert-warning {
  color: var(--text-warning);
  background-color: var(--bg-warning);
  border-color: var(--border-warning);
}

// links in the footer of code chunks from emgithub
div.emgithub-file.emgithub-file-dark > div.file-data.hljs-style-a11y-dark > div > pre > code > table > tbody > tr > td.hljs-ln-line.hljs-ln-code, div.emgithub-file.emgithub-file-dark > div.file-data.hljs-style-a11y-dark > div > pre > code > table > tbody > tr > td.hljs-ln-line.hljs-ln-numbers, div.emgithub-file.emgithub-file-dark > div.file-meta.file-meta-dark, div.emgithub-file.emgithub-file-dark > div.file-meta.file-meta-dark > a {
  background: none;
  margin: 5px 0px;
}

// link to main GitHub code
div.emgithub-file.emgithub-file-dark > div.file-meta.file-meta-dark > a:nth-child(2) {
  font-size: 130%;
  margin-right: 4px;
  background: #3f3f3f;
  border-radius: 10px;
  padding: 5px 9px;
  color: #dfffe0;
}

// link to raw GitHub code
div.emgithub-file.emgithub-file-dark > div.file-meta.file-meta-dark > a:nth-child(1) {
  font-size: 130%;
  background: #3f3f3f;
  border-radius: 10px;
  padding: 3px 9px;
  color: #fff0ea;
  margin-top: -3px;
}

// link buttons
div.emgithub-file.emgithub-file-dark > div.file-meta.file-meta-dark > a:nth-child(1):hover, div.emgithub-file.emgithub-file-dark > div.file-meta.file-meta-dark > a:nth-child(2):hover {
  font-size: 130%;
  background-image: linear-gradient(180deg, #FEFFE5, #FFFFF3, #FFFFF3, #FFFFF3, #FFFFF3, #FFFFF3, #FFFFF3, #FFFFF3, #FEFFE5);
  color: black;
}

// repair colour of certain code words 
div.emgithub-file.emgithub-file-dark > div.file-data.hljs-style-a11y-dark > div > pre > code > table > tbody > * > td.hljs-ln-line.hljs-ln-code > span > span {
  color: white;
}

// add margin under emgithub code chunks
.emgithub-container {
  margin-bottom: 6%;
}

// remove love icon from emgithub chunk footnote
div.emgithub-file.emgithub-file-dark > div.file-meta.file-meta-dark > span {
  display: none;
}

/* Hide the rotating animation shown when emgithub won't load up, 
and instead, display a message. */

// Hide the rotating animation
div.lds-ring > div:nth-child(4) {
  display: none;
}

// Ensure the parent container is positioned correctly
div.lds-ring {
  position: relative; /* Needed to position the pseudo-element */
}

// Create a pseudo-element to display the message
div.lds-ring:after {
  content: '⟳ Please wait or reload page to view this snippet.';
  display: inline-block; /* Allows the text to be centered */
  font-size: 1.2em;
  color: var(--color-red);
  margin-top: 20px; /* Adjust as needed for positioning */
  white-space: nowrap; /* Prevents the text from wrapping */
  box-sizing: border-box; /* Ensures padding and border are included in width */
  position: absolute; /* Absolute positioning within the parent */
  top: 50%; /* Vertically center within the parent */
  left: 50%; /* Horizontally center starting from the left */
  transform: translate(-50%, -50%); /* Adjust the element to be centered */
  text-align: center; /* Centers the text within the element */
  width: fit-content; /* Adjust the width to the text content */
}


// Hanging indentation for references
#reference, #references, .hanging-indent {
  text-indent: -2em; 
  margin-left: 2em;
}

// Related references heading
h3#related-references {
  margin-top: 2rem;
}

// Related references 

.related-references {
  color: var(--related-references);
  scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
  border-style: solid; 
  border-width: 0.2px;
  border-left-color: var(--anim-start);
  border-left-width: thin;
  border-top: none;
  border-right: none;
  border-bottom: none;
  overflow: auto; 
  font-size: 90%; 
  height: 700px; 
  overflow-wrap: normal; 
  margin-top: 1em; 
  margin-left: -0.7em; 
  margin-bottom: 3em;
  padding-right: 0.4em; 
  padding-left: 0.7em;
}


// scroll bar for textarea
textarea {
  scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}


// margin after code snippets
pre {
  margin-bottom: 5%;
}


// in desktop view only
@media (min-width: 1000px) {
  
  // make sidebar headings sticky
  .section-heading, #bio > div > div > div.col-12.col-lg-4 {
    margin: 0;
    height: 100%;
    overflow-y: hidden;
    position: sticky; 
    top: 120px;
    margin-bottom: 20px;
  }
  
  div.col-12.col-lg-4.section-heading > h1 {
    border-bottom: 0.4px solid;
    border-image-source: var(--gradient-section-border);
    border-image-slice: 1;
  }
  
  // remove Experience from profile subsections
  #profile > div:nth-child(5) > div > ul > div:nth-child(1) {
    display: none;
  }
}


/* Enable gallery with modal windows for images */

.image-gallery {
    display: flex;
    flex-wrap: wrap; /* Allows wrapping of images to the next line */
    justify-content: space-between; /* Adds space between columns */
    max-width: 100%;
    margin: 0 auto;
    margin-top: -4%;
}

.imageContainer {
    position: relative; /* Relative positioning for overlay */
    width: 48%; /* Each image container takes up 45% of the width */
    margin-bottom: -4%; /* Reduced margin above the container */
}

.imageContainer img {
    width: 100%; 
    border-radius: 4px;
    cursor: pointer;
    display: block;
}

.expand-icon {
    position: absolute; /* Position icon inside the image */
    top: 50px;
    right: 10px;
    font-size: 24px; /* Adjust icon size */
    color: rgba(255, 255, 255, 0.7); /* Semi-transparent white color */
    pointer-events: none; /* Clicks pass through to image */
    z-index: 1; /* Ensure icon is below the modal content */
}

/* Modal Styling */
.imageModal {
    display: none;
    position: fixed;
    z-index: 2;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    overflow: hidden;
}

.imageModal-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    overflow: auto; /* Allow scrolling for tall images */
}

.imageModal-content-wrapper {
    display: flex;
    justify-content: center;
    align-items: flex-start; /* Align image to start at the top */
    max-width: 100%; /* Ensure full width usage */
    max-height: 100%; /* Ensure full height usage */
    overflow: hidden; /* Prevents content overflow */
    position: relative;
    padding-top: 20px; /* Add padding to create space from the top */
    box-sizing: border-box; /* Ensure padding doesn't add to total height */
}

.imageModal-content {
    width: auto; /* Ensure the image maintains its aspect ratio */
    height: auto; /* Ensure the image maintains its aspect ratio */
    max-width: calc(100% - 20px); /* Image should not exceed the screen's width, accounting for margin */
    max-height: calc(100vh - 40px); /* Image should not exceed the screen's height, accounting for top margin */
    object-fit: contain; /* Ensures image is fully visible within the modal */
    display: block;
    margin: auto 10px; /* Add a 10px margin to the sides, auto for vertical centering */
    position: relative; /* Use relative positioning to create top spacing */
    top: 10px; /* Ensure top margin is visible */
}


/* Navigation Arrows */
.prev, .next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 32px; /* Increased arrow size */
    background-color: rgba(255, 255, 255, 0.8); /* Light background color */
    color: #333; /* Dark color for arrows */
    padding: 15px; /* Increased padding to enlarge the ovals */
    cursor: pointer;
    border-radius: 50%; /* Make it an oval */
    z-index: 2;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5); /* Add a subtle shadow for depth */
    border: none; /* Remove any border */
}

.prev {
    left: 10px; /* Adjusted positioning */
}

.next {
    right: 10px; /* Adjusted positioning */
}

/* On hover: darken the background color and lighten the arrows */
.prev:hover, .next:hover {
    background-color: rgba(200, 200, 200, 0.8);
    color: #000; /* Even darker color on hover */
}

.imageClose {
    position: absolute;
    top: 20px;
    right: 35px;
    color: white;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;
    cursor: pointer;
    z-index: 5; /* Ensure close button is on top of everything */
}

.imageClose:hover, .imageClose:focus {
    color: #bbb;
    text-decoration: none;
    cursor: pointer;
}

.imageModal-text {
    position: absolute;
    text-align: right;
    top: 90px; /* Move text higher to ensure visibility */
    right: 20px;
    color: white;
    background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black background for better visibility */
    font-size: 20px;
    padding: 5px; /* Add padding for better text visibility */
    padding-right: 25px; /* Add padding for better text visibility */
    z-index: 4; /* Higher z-index to appear above the modal content */
}

@media only screen and (max-width: 700px) {
    .imageModal-content {
        width: 100%; /* Full width for small screens */
        height: auto; /* Maintain aspect ratio */
    }

    /* Adjust grid to be single column on small screens */
    .imageContainer {
        width: 100%; /* Full width on smaller screens */
    }
    
    .imageModal-text {
        font-size: 70%;
    }
}


// Remove Disqus heart icon and count
#favorite-button > div {
  visibility: hidden;
}


// External script toggling

.script-container {
  padding: 0px 1px;
  background: var(--bg-script-container);
  border-radius: 10px;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.1);
  margin-bottom: 5%;
}

.toggle-script {
  background: var(--gradient-script);
  color: var(--text-hover);
  border: none;
  padding: 8px 16px;
  font-size: 20px;
  cursor: pointer;
  border-radius: 25px;
  transition: all 0.3s ease;
  outline: none;
}

.toggle-script:hover {
  background: var(--gradient-script-hover);
  transform: scale(1.05);
}

.toggle-script:active {
  transform: scale(0.95);
}


// Full text button

.full-text-btn {
  background-color: var(--bg-full-text);
  color: var(--text-hover);
  border: 2px solid var(--border-full-text);
  border-radius: 12px;
  width: 100%;
  padding: 6px 0;
  margin: 0 auto 5%;
  font-size: 1.4em;
  font-weight: 400;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Arial, sans-serif;
  cursor: pointer;
  transition: background 0.2s, border-color 0.2s, box-shadow 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}
.full-text-btn:hover,
.full-text-btn:focus {
  background-color: var(--bg-full-text-hover);
  border-color: var(--border-full-text-hover);
  box-shadow: 0 0 0 2px var(--bg-button-hover);
  border-radius: 12px; /* Ensures corners stay rounded */
}
.full-text-btn .full-text {
  margin: 0 !important;
  padding: 0 !important;
  font-size: 1em;
  font-weight: 400 !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Arial, sans-serif !important;
  line-height: 1.5 !important;
  letter-spacing: normal !important;
}
.full-text-btn .full-text i {
  margin-right: 8px;
  color: #dc2626;
}
// Prevent h3 hover styles from affecting button text
.full-text-btn:hover .full-text,
.full-text-btn:focus .full-text,
.full-text-btn:hover a,
.full-text-btn:focus a,
.full-text-btn a:hover,
.full-text-btn a:focus {
  color: var(--text-hover) !important;
  text-decoration: none !important;
  background: none !important;
  background-color: transparent !important;
  background-image: none !important;
  box-shadow: none !important;
  border: none !important;
}
// Same for dark mode
body.dark .full-text-btn:hover .full-text,
body.dark .full-text-btn:focus .full-text,
body.dark .full-text-btn:hover a,
body.dark .full-text-btn:focus a,
body.dark .full-text-btn a:hover,
body.dark .full-text-btn a:focus,
.dark .full-text-btn:hover .full-text,
.dark .full-text-btn:focus .full-text,
.dark .full-text-btn:hover a,
.dark .full-text-btn:focus a,
.dark .full-text-btn a:hover,
.dark .full-text-btn a:focus {
  color: var(--text-hover) !important;
  text-decoration: none !important;
  background: none !important;
  background-color: transparent !important;
  background-image: none !important;
  box-shadow: none !important;
  border: none !important;
}


// CV button

// Add top margin only to the first btn-links container (which contains CV button)
.pub > .container > .article-container > .btn-links.mb-3:first-of-type,
.article-container > .btn-links.mb-3:first-of-type {
  margin-top: 8% !important;
}

.cv-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--bg-cv);
  color: var(--text-hover);
  border: 2px solid var(--border-cv);
  border-radius: 12px;
  width: 100%;
  padding: 8px 0 10px 0;
  font-size: 1.4em; 
  font-weight: 400;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Arial, sans-serif;
  text-decoration: none;
  transition: background 0.2s, border-color 0.2s, box-shadow 0.2s;
  margin: 0 auto 1%;
  cursor: pointer;
}
.cv-btn:hover,
.cv-btn:focus {
  background-color: var(--bg-cv-hover);
  border-color: var(--border-cv-hover);
  box-shadow: 0 0 0 2px var(--bg-button-hover);
  border-radius: 12px; /* Ensures corners stay rounded */
}
.cv-btn i {
  color: var(--text-secondary);
  margin-right: 8px;
}


// Collapsible text widget styles - simplified and reusable

/* The content container starts collapsed (showing ~3 lines) */
.collapsible-text-content {
  max-height: 5.3rem; 
  overflow: hidden;
  transition: max-height 0.4s ease-in-out;
}

/* When expanded, content shows full height */
.collapsible-text-wrapper.is-expanded .collapsible-text-content {
  overflow: visible;
}

/* Style the "Continue reading" button to look like a subtle link */
.read-more-btn {
  border: none;
  padding: 0;
  background: none;
  color: #6b7280; /* subdued grey */
  font-weight: 400;
  font-style: italic;
  cursor: pointer;
  font-size: 0.95rem;
  transition: color 0.2s ease-in-out;
  display: inline-block;
  margin-top: 0.5rem;
}

.read-more-btn:hover {
  color: #4b5563; /* darker grey on hover */
  text-decoration: underline;
  background: none !important;
  background-color: transparent !important;
}

/* Hide button when wrapper is expanded (handled by JavaScript fadeOut) */
.collapsible-text-wrapper.is-expanded .read-more-btn {
  display: none;
}

// Add margin under section headings 
.section-heading.visible {
  margin-bottom: 4%;
}

/* Enhanced Navigation Highlighting System */

// Ensure navigation links have proper styling for highlighting
.navbar-nav .nav-link {
  transition: all 0.3s ease;
  position: relative;
}

// Active navigation item highlighting - Light theme
.navbar-nav .nav-link.active {
  color: aquamarine !important;
  font-weight: bold !important;
  position: relative;
}

.navbar-nav .nav-link.active::after {
  content: '';
  position: absolute;
  bottom: 2px;
  left: 50%;
  transform: translateX(-50%);
  width: 80%;
  height: 1px;
  background: aquamarine;
  border-radius: 1px;
}

// Hover states for navigation
.navbar-nav .nav-link:hover:not(.active) {
  color: var(--nav-hover) !important;
  transform: translateY(-1px);
}

// Dark theme navigation highlighting
.dark .navbar-nav .nav-link.active,
.dark .navbar-nav .nav-item .nav-link.active,
body.dark .navbar-nav .nav-link.active,
body.dark .navbar-nav .nav-item .nav-link.active {
  color: aquamarine !important;
  font-weight: normal !important; // Remove bold in dark theme
}

// Additional specificity to override bold styling in dark theme
body.dark .navbar-nav .nav-link.active,
body.dark .nav-link.active {
  font-weight: normal !important;
}

// Nuclear option - extremely specific selector for dark theme
html body.dark .navbar-nav .nav-link.active,
html body.dark #navbar-main .navbar-nav .nav-link.active,
html body.dark .navbar-collapse .navbar-nav .nav-link.active {
  font-weight: 300 !important; // Use lighter weight to ensure no bold
}

.dark .navbar-nav .nav-link.active::after,
.dark .navbar-nav .nav-item .nav-link.active::after,
body.dark .navbar-nav .nav-link.active::after,
body.dark .navbar-nav .nav-item .nav-link.active::after {
  background: aquamarine !important;
}

.dark .navbar-nav .nav-link:hover:not(.active) {
  color: var(--nav-hover) !important;
}

// Smooth scroll behavior for better section detection
html {
  scroll-behavior: smooth;
}

// Section offset to account for fixed navbar
section[id] {
  scroll-margin-top: 80px; // Adjust for navbar height
}

// Mobile responsive navigation highlighting
@media (max-width: 768px) {
  .navbar-nav .nav-link.active::after {
    width: 100%;
    left: 0;
    transform: none;
  }
  
  section[id] {
    scroll-margin-top: 60px; // Adjusted for mobile navbar height
  }
  
  // Remove underlines from navigation menu items in mobile view
  .navbar-nav .nav-link,
  .navbar-nav .nav-link.active,
  .navbar-nav .nav-item .nav-link,
  .navbar-nav .nav-item .nav-link.active,
  #navbar-main .navbar-nav .nav-link,
  #navbar-main .navbar-nav .nav-link.active {
    text-decoration: none !important;
  }
  
  .navbar-nav .nav-link.active::after,
  .navbar-nav .nav-item .nav-link.active::after,
  #navbar-main .navbar-nav .nav-link.active::after {
    display: none !important;
  }
  
  // Fix mobile dropdown positioning - hang under toggle icon on left side
  .navbar-collapse {
    width: auto !important;
    max-width: 250px !important;
    left: 15px !important;           // Position from left (under toggle)
    right: auto !important;          // Remove right positioning
    border-radius: 8px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
  }
}

/* CRITICAL FIXES - Maximum specificity overrides */

// 1. Fix avatar circle shape in all themes - NUCLEAR OPTION
img[class*="avatar-circle"],
*[class*="avatar-circle"] img,
*[class*="avatar"] img[class*="circle"],
html body div .avatar.avatar-circle img,
html body div .avatar-circle img,
html body .portrait .avatar.avatar-circle img,
html body .portrait .avatar-circle img,
body div .avatar.avatar-circle img,
body div .avatar-circle img,
.avatar.avatar-circle img,
.avatar-circle img {
  border-radius: 50% !important;
  -webkit-border-radius: 50% !important;
  -moz-border-radius: 50% !important;
  clip-path: circle(50%) !important;
  -webkit-clip-path: circle(50%) !important;
  shape-outside: circle(50%) !important;
  overflow: hidden !important;
  width: auto !important;
  height: auto !important;
  max-width: 100% !important;
  max-height: 100% !important;
  transform: translateX(-50%) scale(0.8) !important;
  -webkit-transform: translateX(-50%) scale(0.8) !important;
  -moz-transform: translateX(-50%) scale(0.8) !important;
  -ms-transform: translateX(-50%) scale(0.8) !important;
  transform-origin: center center !important;
  -webkit-transform-origin: center center !important;
  -moz-transform-origin: center center !important;
  -ms-transform-origin: center center !important;
  border: none !important;
  border: 0 !important;
  outline: none !important;
  box-shadow: none !important;
  -webkit-box-shadow: none !important;
  -moz-box-shadow: none !important;
  position: relative !important;
  left: 51% !important;
}

// Remove borders from avatar containers too
.avatar.avatar-circle,
.avatar-circle,
*[class*="avatar-circle"],
*[class*="avatar"],
.portrait .avatar.avatar-circle,
.portrait .avatar-circle,
div.avatar.avatar-circle,
div.avatar-circle {
  border: none !important;
  border: 0 !important;
  outline: none !important;
  box-shadow: none !important;
  -webkit-box-shadow: none !important;
  -moz-box-shadow: none !important;
  background: transparent !important;
  padding: 0 !important;
  margin: 0 !important;
}

// Remove any ::before or ::after pseudo-elements that might create borders
.avatar.avatar-circle::before,
.avatar.avatar-circle::after,
.avatar-circle::before,
.avatar-circle::after,
*[class*="avatar-circle"]::before,
*[class*="avatar-circle"]::after {
  display: none !important;
  content: none !important;
  border: none !important;
  box-shadow: none !important;
}

// 2. Fix navigation active color with ULTIMATE specificity
html body.dark #navbar-main .navbar-nav .nav-item .nav-link.active,
html body.dark .navbar .navbar-nav .nav-item .nav-link.active,
html body.dark .navbar .navbar-nav .nav-link.active,
html body.dark nav .navbar-nav .nav-link.active,
html:not(.light) body.dark .navbar-nav .nav-link.active,
.dark html body .navbar-nav .nav-link.active {
  color: aquamarine !important;
  font-weight: 600 !important;
  text-shadow: 0 0 2px aquamarine !important;
}

html body.dark #navbar-main .navbar-nav .nav-item .nav-link.active::after,
html body.dark .navbar .navbar-nav .nav-item .nav-link.active::after,
html body.dark .navbar .navbar-nav .nav-link.active::after,
html body.dark nav .navbar-nav .nav-link.active::after,
html:not(.light) body.dark .navbar-nav .nav-link.active::after,
.dark html body .navbar-nav .nav-link.active::after {
  background: aquamarine !important;
  box-shadow: 0 0 3px aquamarine !important;
}

// 3. Aquamarine to dark grey gradient for section headings in dark theme
html body.dark div.col-12.col-lg-4.section-heading > h1,
html body.dark .section-heading > h1,
body.dark div.col-12.col-lg-4.section-heading > h1,
body.dark .section-heading > h1 {
  border-image-source: linear-gradient(to right, aquamarine, #2d2d2d) !important;
  border-image-slice: 1 !important;
  border-bottom: 0.4px solid !important;
}

////////////////////////////
// Search Results Styling
////////////////////////////

// Style search result titles with elegant colors
#search > div > section.section-search-results h3,
.section-search-results h3,
.search-results h3,
#search .section-search-results h3 a,
.section-search-results h3 a,
.search-results h3 a {
  color: #4a5568 !important; // Elegant dark grey for light theme
  font-weight: 600;
  transition: color 0.3s ease;
  text-decoration: none !important;
}

#search > div > section.section-search-results h3:hover,
.section-search-results h3:hover,
.search-results h3:hover {
  color: #2d3748 !important; // Darker elegant grey on hover for light theme
}

// Dark theme search result titles
body.dark #search > div > section.section-search-results h3,
body.dark .section-search-results h3,
body.dark .search-results h3,
body.dark #search .section-search-results h3 a,
body.dark .section-search-results h3 a,
body.dark .search-results h3 a {
  color: #a0aec0 !important; // Soft warm grey for dark theme
}

body.dark #search > div > section.section-search-results h3:hover,
body.dark .section-search-results h3:hover,
body.dark .search-results h3:hover,
body.dark #search .section-search-results h3 a:hover,
body.dark .section-search-results h3 a:hover,
body.dark .search-results h3 a:hover {
  color: #cbd5e0 !important; // Lighter warm grey on hover for dark theme
}

// Remove default blue color from search result links
#search > div > section.section-search-results a,
.section-search-results a,
.search-results a {
  text-decoration: none !important;
}

#search > div > section.section-search-results a h3,
.section-search-results a h3,
.search-results a h3 {
  color: inherit !important; // Use the colors defined above
}

////////////////////////////
// Navigation Icon Colors (Search & Theme Toggle)
////////////////////////////

// Default grey color for search icon and theme toggle
.navbar-nav .nav-link.js-search,
.navbar-nav .nav-link.js-dark-toggle {
  color: var(--nav-text) !important; // Use default grey
}

// Keep current hover colors for search icon and theme toggle
.navbar-nav .nav-link.js-search:hover {
  color: var(--nav-hover-text) !important; // Current hover color
}

.navbar-nav .nav-link.js-dark-toggle:hover {
  color: var(--nav-hover-text) !important; // Current hover color
}

// Dark theme
body.dark .navbar-nav .nav-link.js-search,
body.dark .navbar-nav .nav-link.js-dark-toggle {
  color: var(--nav-text) !important; // Use default grey
}

body.dark .navbar-nav .nav-link.js-search:hover,
body.dark .navbar-nav .nav-link.js-dark-toggle:hover {
  color: var(--nav-hover-text) !important; // Current hover color
}

////////////////////////////
// Search Close Icon Styling
////////////////////////////

// Remove background color and add dark aquamarine icon color on hover (light theme)
#search > div > section.search-header > div.row.no-gutters.justify-content-between.mb-3 > div.col-6.col-search-close > a > i:hover,
.search-header .col-search-close a i:hover {
  background-color: transparent !important;
  color: #5f9ea0 !important; // Dark aquamarine for light theme
  transition: color 0.3s ease;
}

// Ensure no background color is applied
#search > div > section.search-header > div.row.no-gutters.justify-content-between.mb-3 > div.col-6.col-search-close > a:hover,
.search-header .col-search-close a:hover {
  background-color: transparent !important;
}

// Dark theme search close icon (regular aquamarine)
body.dark #search > div > section.search-header > div.row.no-gutters.justify-content-between.mb-3 > div.col-6.col-search-close > a > i:hover,
body.dark .search-header .col-search-close a i:hover {
  background-color: transparent !important;
  color: aquamarine !important;
}

////////////////////////////
// NUCLEAR OPTIONS - FINAL OVERRIDES
////////////////////////////

/* NUCLEAR OVERRIDE FOR SEARCH RESULTS - Must be at end of file */
html body #search div.section-search-results h3,
html body #search div.section-search-results h3 a,
html body .section-search-results h3,
html body .section-search-results h3 a,
html body .search-results h3,
html body .search-results h3 a {
  color: #4a5568 !important; /* Elegant dark grey for light theme */
}

html body.dark #search div.section-search-results h3,
html body.dark #search div.section-search-results h3 a,
html body.dark .section-search-results h3,
html body.dark .section-search-results h3 a,
html body.dark .search-results h3,
html body.dark .search-results h3 a {
  color: #a0aec0 !important; /* Soft warm grey for dark theme */
}

/* NUCLEAR OVERRIDE FOR ACTIVE MENU BOLD - Must be at end of file */
html body.dark #navbar-main .navbar-nav .nav-link.active,
html body.dark .navbar-collapse .navbar-nav .nav-link.active,
html body.dark .navbar-nav .nav-link.active {
  font-weight: 300 !important; /* Light weight to ensure no bold */
}

/* Additional Bootstrap and theme overrides for dark theme */
.dark .nav-link.active,
.dark .navbar-nav .nav-link.active,
.dark .navbar-light .navbar-nav .nav-link.active,
body.dark .nav-link.active,
body.dark .navbar-nav .nav-link.active,
body.dark .navbar-light .navbar-nav .nav-link.active {
  font-weight: 300 !important;
}

/* Force override any inherited bold styling */
html body.dark * .nav-link.active {
  font-weight: 300 !important;
}

/* NUCLEAR SEARCH RESULT TITLE STYLING - Override blue defaults */
html body .search-hit h1,
html body .search-hit h2,
html body .search-hit h3,
html body .search-hit h4,
html body .search-hit h5,
html body .search-hit h6,
html body .search-results .search-hit h1,
html body .search-results .search-hit h2,
html body .search-results .search-hit h3,
html body .search-results .search-hit h4,
html body .search-results .search-hit h5,
html body .search-results .search-hit h6,
html body #search-results .search-hit h1,
html body #search-results .search-hit h2,
html body #search-results .search-hit h3,
html body #search-results .search-hit h4,
html body #search-results .search-hit h5,
html body #search-results .search-hit h6 {
  color: #009688 !important; /* Force aquamarine */
}

/* Target any link in search results */
html body .search-hit a,
html body .search-results .search-hit a,
html body #search-results .search-hit a,
html body .search-hit a h1,
html body .search-hit a h2,
html body .search-hit a h3,
html body .search-hit a h4,
html body .search-hit a h5,
html body .search-hit a h6 {
  color: #009688 !important; /* Force aquamarine */
  text-decoration: none !important;
}

/* Dark theme version for search results */
html body.dark .search-hit h1,
html body.dark .search-hit h2,
html body.dark .search-hit h3,
html body.dark .search-hit h4,
html body.dark .search-hit h5,
html body.dark .search-hit h6,
html body.dark .search-hit a,
html body.dark .search-hit a h1,
html body.dark .search-hit a h2,
html body.dark .search-hit a h3,
html body.dark .search-hit a h4,
html body.dark .search-hit a h5,
html body.dark .search-hit a h6 {
  color: #64ffda !important; /* Force light aquamarine for dark theme */
  text-decoration: none !important;
}

// Make navbar thinner in desktop view by reducing bottom spacing
@media (min-width: 992px) {
  .navbar {
    height: 70px; // Adjusted to accommodate internal padding (60px + 5px top + 5px bottom)
    padding-top: 5px; // Decrease top margin a tiny bit
    padding-bottom: 5px; // Adjust bottom margin accordingly
  }
  
  .navbar-nav .nav-item {
    margin-bottom: 0; // Remove any bottom margin from nav items
    margin-top: 0; // Remove extra margin to align with logo
  }
  
  .navbar-nav .nav-link {
    padding-top: 10px; // Increase top padding slightly
    padding-bottom: 2px; // Decrease margin between titles and underlining bars
  }
  
  .navbar-brand {
    padding-top: 5px; // Match navbar top padding for alignment
    padding-bottom: 2px; // Reduce bottom padding for logo
  }
  
  .navbar-brand img {
    max-height: 50px; // Adjust logo height for thinner navbar
  }
  
  // Make active and hover underline bars thinner
  .navbar-nav .nav-link::after,
  .navbar-nav .nav-link:hover::after,
  .navbar-nav .nav-link.active::after {
    height: 1px !important; // Make underline bars thinner (default is usually 2-3px)
  }
  
  .navbar-nav .nav-link {
    border-bottom-width: 1px !important; // Alternative method for underlines
  }
  
  .navbar-nav .nav-link:hover,
  .navbar-nav .nav-link.active {
    border-bottom-width: 1px !important; // Ensure hover and active states are also thin
  }
  
  // Fix scroll offset for proper section highlighting
  html {
    scroll-padding-top: 70px; // Match navbar height for proper scroll positioning
  }
  
  // Remove glow effects from navbar in dark theme
  html body.dark .navbar-nav .nav-link,
  html body.dark .navbar-nav .nav-link:hover,
  html body.dark .navbar-nav .nav-link.active,
  html body.dark .navbar-nav .nav-link:focus {
    text-shadow: none !important; // Remove text glow/shadow
    box-shadow: none !important; // Remove any box shadow
  }
  
  html body.dark .navbar-nav .nav-link::after,
  html body.dark .navbar-nav .nav-link:hover::after,
  html body.dark .navbar-nav .nav-link.active::after {
    box-shadow: none !important; // Remove glow from underline bars
    text-shadow: none !important; // Remove any shadow effects
  }
  
  // Dark theme specific: Make ONLY active item underline thinner and darker
  html.dark body.dark .navbar-nav .nav-link.active::after,
  html.dark body.dark #navbar-content > ul > li > a.active::after,
  html.dark body.dark .nav-link.active::after,
  body.dark .navbar-nav .nav-link.active::after,
  body.dark #navbar-content > ul > li > a.active::after,
  body.dark .nav-link.active::after {
    height: 0.3px !important; // Make it even thinner
    background: none !important; // Remove existing background
    background-color: transparent !important; // Make background transparent
    background-image: none !important; // Remove any background image
    border: none !important; // Remove any border
    border-bottom: 0.3px solid #1f6a61 !important; // Darker aquamarine underline
    box-shadow: none !important; // Remove any glow/shadow effects
    text-shadow: none !important; // Remove text glow
    --nav-active: #1f6a61 !important; // Override the CSS variable locally
  }
  
  // Remove glow from active navbar text in dark theme
  html.dark body.dark .navbar-nav .nav-link.active,
  html.dark body.dark #navbar-content > ul > li > a.active,
  html.dark body.dark .nav-link.active,
  body.dark .navbar-nav .nav-link.active,
  body.dark #navbar-content > ul > li > a.active,
  body.dark .nav-link.active {
    box-shadow: none !important; // Remove glow from text
    text-shadow: none !important; // Remove text glow
  }
}

// Mobile and tablet toggle menu width adjustments
@media (max-width: 991px) {
  .navbar-collapse {
    max-width: calc(100% - 40px) !important; // Leave 20px margin on each side
    width: fit-content !important; // Use minimum necessary width
    min-width: 280px !important; // Ensure minimum usable width
  }
  
  // Only apply alignment when menu is actually collapsed and shown
  .navbar-collapse.show {
    margin-left: 0 !important; // Align with toggle icon
    margin-right: auto !important;
  }
  
  // Ensure navbar nav doesn't interfere when menu is shown
  .navbar-collapse.show .navbar-nav {
    margin-left: 0 !important;
    padding-left: 0 !important;
  }
}

// Tablet-specific adjustments (768px to 991px)
@media (min-width: 768px) and (max-width: 991px) {
  .navbar-collapse {
    max-width: 400px !important; // Limit width on tablets
    margin-left: 0 !important; // Align with toggle icon
    margin-right: auto !important;
  }
}

// Mobile-specific adjustments (below 768px)
@media (max-width: 767px) {
  .navbar-collapse {
    max-width: calc(100% - 30px) !important; // Leave 15px margin on each side
    margin-left: 0 !important; // Align with toggle icon
    margin-right: auto !important;
    min-width: 260px !important; // Smaller minimum width for mobile
  }
}

// Desktop: Smart word wrapping for section headings
@media (min-width: 992px) {
  .section-heading h1,
  .section-heading h2,
  .section-heading h3 {
    white-space: normal !important; // Allow line breaks between words
    word-break: keep-all !important; // Don't break words
    overflow-wrap: normal !important; // Don't wrap within words
    hyphens: none !important; // Disable hyphenation
    overflow: visible !important; // No scroll bars
    line-height: 1.2 !important; // Tighter line spacing for multi-line headings
    max-width: 100% !important; // Respect container width
  }
  
  .section-heading {
    overflow: visible !important; // No scroll bars on container
    word-break: keep-all !important; // Don't break words
  }
}


// Create class to disable automatic bullet list formatting

.no-bullets {
  list-style-type: none;
  padding-left: 0; /* Optional: Removes the default list indentation */
}

// Collapsed code chunks styling - center the Expand/Collapse button
details summary {
  cursor: pointer !important;
  margin-bottom: 1rem !important;
  text-align: center !important;
  display: block !important;
  list-style: none !important;
  width: 100% !important;
  
  &::-webkit-details-marker {
    display: none !important;
  }
}

details[open] summary {
  margin-bottom: 0.5rem; // Slightly less margin when expanded
}

// Left-align only summary elements that contain code blocks (pre elements)
details:has(pre) summary {
  text-align: left !important;
}

// Add arrows to code block Expand/Collapse buttons
details:has(pre) summary::before {
  content: '▶';
  margin-right: 0.5em;
}

details:has(pre)[open] summary::before {
  content: '▼';
}

// Add margin above h2 headings
h2 {
  margin-top: 2rem;
}

// GitHub workflow button styling
.github-workflow-button {
  display: inline-block !important;
  padding: 0.75em 1.5em !important;
  background-color: #1565C0 !important;
  color: #ffffff !important;
  text-decoration: none !important;
  border-radius: 6px !important;
  font-weight: 600 !important;
  transition: all 0.3s !important;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3) !important;
  border: 2px solid #0d47a1 !important;
  
  &:hover, &:focus, &:visited {
    background-color: #0d47a1 !important;
    color: #ffffff !important;
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.4) !important;
    transform: translateY(-2px) !important;
    text-decoration: none !important;
  }
}

// Dark theme - button should stay the same
body.dark .github-workflow-button {
  background-color: #1565C0 !important;
  color: #ffffff !important;
  border-color: #0d47a1 !important;
  
  &:hover, &:focus, &:visited {
    background-color: #0d47a1 !important;
    color: #ffffff !important;
  }
}

// Increase padding for pre elements with class 'text'
pre.text {
  padding: 0.8em !important;
}

// Image captions
p.caption {
  margin-top: 2%;
}

// Table captions
table caption {
  color: inherit;
}

